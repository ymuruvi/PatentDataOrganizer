package patent.data.converter;

import java.awt.EventQueue;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.util.ArrayList;
import java.util.HashMap;
import javax.swing.JFileChooser;
import patent.data.converter.utilities.Record;
import patent.data.converter.utilities.Tools;

/**
 *
 * @author Nano
 */
public class ConverterGUI extends javax.swing.JFrame {

    private File currentDirectory;
    
    private static HashMap records;
    
    public static void main(String[] args) {

        File folder;
        records = new HashMap();
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(ConverterGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(ConverterGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(ConverterGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(ConverterGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                new ConverterGUI().setVisible(true);
            }
        });
    }

    /**
     * 
     * @param folder 
     */
    public void openDirectory(File folder) {
        File[] files;
        String filePath;
        String folderPath;
        Record r;
        
        if (folder.isDirectory()) {
            
            records = new HashMap();
            folderPath = folder.getAbsolutePath();
            files = folder.listFiles();
            System.out.println(files.length + " files in " + folderPath);
            
            for (File f : files) {
                if (f.isFile()) {
                    filePath = f.getAbsolutePath();
                    if ("xml".equals(Tools.getExtension(filePath))) {
                        System.out.println(Tools.Contstants.ANSI_GREEN + "Reading: " + filePath + Tools.Contstants.ANSI_RESET);
                        r = new Record();
                        
                        r.parse(filePath);
                        try{
                            System.out.println("Record Print: " + r);
                            records.put(r.getRecordID(), r);
                        }catch(Exception e){
                            System.out.println(Tools.Contstants.ANSI_RED + "Error: " + e + Tools.Contstants.ANSI_RESET);
                        }
                    } else {
                        System.out.println(Tools.Contstants.ANSI_RED + filePath
                                + " is not an XML File (" + Tools.getExtension(filePath)
                                + ")" + Tools.Contstants.ANSI_RESET);
                    }

                }
            }
        }
    }

    /**
     *
     */
    public ConverterGUI() {
        currentDirectory = null;
        initComponents();
    }

    /**
     *
     */
    public void initGUI() {
        File f = chooseGraphicDirectory();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        folderChooser = new javax.swing.JFileChooser();
        jPopupMenu1 = new javax.swing.JPopupMenu();
        jMenuItem2 = new javax.swing.JMenuItem();
        tabbedPane = new javax.swing.JTabbedPane();
        jPanel2 = new javax.swing.JPanel();
        jScrollPane2 = new javax.swing.JScrollPane();
        jPanel1 = new javax.swing.JPanel();
        docTypeBox = new javax.swing.JCheckBox();
        docNumBox = new javax.swing.JCheckBox();
        appNumBox = new javax.swing.JCheckBox();
        engTitleBox = new javax.swing.JCheckBox();
        frTitleBox = new javax.swing.JCheckBox();
        inventorsBox = new javax.swing.JCheckBox();
        ownersBox = new javax.swing.JCheckBox();
        applicantsBox = new javax.swing.JCheckBox();
        agentBox = new javax.swing.JCheckBox();
        issuedBox = new javax.swing.JCheckBox();
        reissuedBox = new javax.swing.JCheckBox();
        filedBox = new javax.swing.JCheckBox();
        openToPubInspBox = new javax.swing.JCheckBox();
        examReqBox = new javax.swing.JCheckBox();
        reExamCertBox = new javax.swing.JCheckBox();
        canPatClassBox = new javax.swing.JCheckBox();
        intPatentClassBox = new javax.swing.JCheckBox();
        patentCoopTreatyBox = new javax.swing.JCheckBox();
        appPriorityDataBox = new javax.swing.JCheckBox();
        availOfLicBox = new javax.swing.JCheckBox();
        jPanel5 = new javax.swing.JPanel();
        docNumSearchBox = new javax.swing.JTextField();
        docNumLbl = new javax.swing.JLabel();
        searchDocNumBtn = new javax.swing.JButton();
        jPanel3 = new javax.swing.JPanel();
        menuBar = new javax.swing.JMenuBar();
        fileMenu = new javax.swing.JMenu();
        openFolderItem = new javax.swing.JMenuItem();
        exportDataItem = new javax.swing.JMenuItem();
        editMenu = new javax.swing.JMenu();
        viewMenu = new javax.swing.JMenu();
        jMenuItem1 = new javax.swing.JMenuItem();

        jMenuItem2.setText("jMenuItem2");

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        docTypeBox.setText("(12) Document Type");

        docNumBox.setText("Document Number");

        appNumBox.setText("Application Number");

        engTitleBox.setText("English Title");

        frTitleBox.setText("French Title");

        inventorsBox.setText("Inventors");

        ownersBox.setText("Owners");

        applicantsBox.setText("Applicants");

        agentBox.setText("Agent");

        issuedBox.setText("Issued");

        reissuedBox.setText("Reissued");

        filedBox.setText("Filed");

        openToPubInspBox.setText("Open To Public Inspection");

        examReqBox.setText("Examination Requested");

        reExamCertBox.setText("Re-examination Certificate");

        canPatClassBox.setText("Canadian Patent Classification");

        intPatentClassBox.setText("International Patent Classification");

        patentCoopTreatyBox.setText("Patent Cooperation Treaty");

        appPriorityDataBox.setText("Application Priority Data");

        availOfLicBox.setText("Availability of License");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(docNumBox)
                    .addComponent(ownersBox)
                    .addComponent(applicantsBox)
                    .addComponent(appNumBox)
                    .addComponent(docTypeBox)
                    .addComponent(frTitleBox)
                    .addComponent(engTitleBox)
                    .addComponent(inventorsBox)
                    .addComponent(agentBox)
                    .addComponent(reissuedBox)
                    .addComponent(canPatClassBox)
                    .addComponent(intPatentClassBox)
                    .addComponent(filedBox)
                    .addComponent(issuedBox)
                    .addComponent(examReqBox)
                    .addComponent(openToPubInspBox)
                    .addComponent(reExamCertBox)
                    .addComponent(patentCoopTreatyBox)
                    .addComponent(appPriorityDataBox)
                    .addComponent(availOfLicBox))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(docTypeBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(docNumBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(appNumBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(engTitleBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(frTitleBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(inventorsBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(ownersBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(applicantsBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(agentBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(issuedBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(reissuedBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(filedBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(openToPubInspBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(examReqBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(reExamCertBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(canPatClassBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(intPatentClassBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(patentCoopTreatyBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(appPriorityDataBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(availOfLicBox)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jScrollPane2.setViewportView(jPanel1);

        jPanel5.setBackground(new java.awt.Color(246, 246, 246));

        docNumLbl.setText("Document Number");

        searchDocNumBtn.setText("Search");
        searchDocNumBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                searchDocNumBtnActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel5Layout = new javax.swing.GroupLayout(jPanel5);
        jPanel5.setLayout(jPanel5Layout);
        jPanel5Layout.setHorizontalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(docNumLbl, javax.swing.GroupLayout.PREFERRED_SIZE, 128, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(docNumSearchBox, javax.swing.GroupLayout.PREFERRED_SIZE, 123, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(searchDocNumBtn)
                .addContainerGap(7, Short.MAX_VALUE))
        );
        jPanel5Layout.setVerticalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(docNumSearchBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(docNumLbl)
                    .addComponent(searchDocNumBtn))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel5, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 187, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jPanel5, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 332, Short.MAX_VALUE))
                .addContainerGap())
        );

        tabbedPane.addTab("Record Data", jPanel2);

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 578, Short.MAX_VALUE)
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 344, Short.MAX_VALUE)
        );

        tabbedPane.addTab("tab2", jPanel3);

        fileMenu.setText("File");

        openFolderItem.setText("Open Folder");
        openFolderItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                openFolderItemActionPerformed(evt);
            }
        });
        fileMenu.add(openFolderItem);

        exportDataItem.setText("Export Data");
        fileMenu.add(exportDataItem);

        menuBar.add(fileMenu);

        editMenu.setText("Edit");
        menuBar.add(editMenu);

        viewMenu.setText("View");

        jMenuItem1.setText("jMenuItem1");
        jMenuItem1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem1ActionPerformed(evt);
            }
        });
        viewMenu.add(jMenuItem1);

        menuBar.add(viewMenu);

        setJMenuBar(menuBar);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(tabbedPane)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(tabbedPane)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    /**
     * 
     * @param evt 
     */
    private void openFolderItemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_openFolderItemActionPerformed
        currentDirectory = chooseGraphicDirectory();
        openDirectory(currentDirectory);
    }//GEN-LAST:event_openFolderItemActionPerformed

    private void jMenuItem1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenuItem1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jMenuItem1ActionPerformed

    private void searchDocNumBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_searchDocNumBtnActionPerformed
        String searchNum;
        searchNum = docNumSearchBox.getText();
    }//GEN-LAST:event_searchDocNumBtnActionPerformed

    /**
     *
     * @param evt
     * @return
     */
    public File chooseGraphicDirectory() {
        File out = null;
        JFileChooser folderChooser = new javax.swing.JFileChooser();
        folderChooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);

        if (folderChooser.showOpenDialog(this) == JFileChooser.APPROVE_OPTION) {
            System.out.println("Directory: " + folderChooser.getSelectedFile());
            out = folderChooser.getSelectedFile();
        } else {
            System.out.println("No Option");
        }
        return out;
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JCheckBox agentBox;
    private javax.swing.JCheckBox appNumBox;
    private javax.swing.JCheckBox appPriorityDataBox;
    private javax.swing.JCheckBox applicantsBox;
    private javax.swing.JCheckBox availOfLicBox;
    private javax.swing.JCheckBox canPatClassBox;
    private javax.swing.JCheckBox docNumBox;
    private javax.swing.JLabel docNumLbl;
    private javax.swing.JTextField docNumSearchBox;
    private javax.swing.JCheckBox docTypeBox;
    private javax.swing.JMenu editMenu;
    private javax.swing.JCheckBox engTitleBox;
    private javax.swing.JCheckBox examReqBox;
    private javax.swing.JMenuItem exportDataItem;
    private javax.swing.JMenu fileMenu;
    private javax.swing.JCheckBox filedBox;
    private javax.swing.JFileChooser folderChooser;
    private javax.swing.JCheckBox frTitleBox;
    private javax.swing.JCheckBox intPatentClassBox;
    private javax.swing.JCheckBox inventorsBox;
    private javax.swing.JCheckBox issuedBox;
    private javax.swing.JMenuItem jMenuItem1;
    private javax.swing.JMenuItem jMenuItem2;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPopupMenu jPopupMenu1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JMenuBar menuBar;
    private javax.swing.JMenuItem openFolderItem;
    private javax.swing.JCheckBox openToPubInspBox;
    private javax.swing.JCheckBox ownersBox;
    private javax.swing.JCheckBox patentCoopTreatyBox;
    private javax.swing.JCheckBox reExamCertBox;
    private javax.swing.JCheckBox reissuedBox;
    private javax.swing.JButton searchDocNumBtn;
    private javax.swing.JTabbedPane tabbedPane;
    private javax.swing.JMenu viewMenu;
    // End of variables declaration//GEN-END:variables

}
